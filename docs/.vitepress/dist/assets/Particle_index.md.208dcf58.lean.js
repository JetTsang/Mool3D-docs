import{V as t,al as s,p as a,b as n,d as e,r as i,e as l,f as o,w as p,g as c,o as d,c as r,j as u,h as k,i as h,v as y,u as g,t as f,a as w,k as m}from"./app.fee60d13.js";import{V as b,b as v}from"./index.207465f4.js";class x extends b{constructor(t){super(t),this.initModel()}init(){this.initSource(),this.initSky(),this.setLight(),this.initFog(),this.model.playAllClipes(this.sceneidx),this.sky.initShaderSky({scale:1e3,turbidity:1,rayleigh:2,postion:[-100,5,-100]}),this.particle=this.initParticleEngine(this.particle,!0),this.fog.initFogExp("#cccccc",.003),this.initWater({textureWidth:200,textureHeight:200,radius:400,waterPosition:new t(0,0,0),texture:this.souce.loadTexture({path:"/docs/public/images/waternormals.jpg",onLoad:function(t){t.wrapS=t.wrapT=s}}),sunPosition:new t(-10,10,-10),sunColor:"#f2c144",waterColor:"#fff",distortionScale:.7,time:.01,scene:this.scene})}setLight(){var t;null==(t=this.ambient)||t.setLight(1.5,.7)}setSky(){this.sky.sky.material.uniforms.sunPosition.value=new t(-100,5,-100)}snow(){var s;null==(s=this.ambient)||s.setLight(1,.7),this.sky.sky.material.uniforms.sunPosition.value=new t(0,1,0),this.particle.destroy(),this.setParticleMode(this.particle,"snow",{positionBase:new t(0,150,0),positionSpread:new t(400,0,400),velocityBase:new t(20,-100,0),velocitySpread:new t(-10,-50,0),particlesPerSecond:50,particleDeathAge:3,sizeTween:this.getParticleTween([0,.25],[10,13])})}rain(){var s;this.particle.destroy(),null==(s=this.ambient)||s.setLight(.2,.7),this.sky.sky.material.uniforms.sunPosition.value=new t(0,1,0),this.setParticleMode(this.particle,"rain",{positionBase:new t(0,150,0),positionSpread:new t(400,0,400),velocityBase:new t(0,-200,0),velocitySpread:new t(0,0,0),particlesPerSecond:150,particleDeathAge:2,sizeBase:20,sizeSpread:10,opacityBase:.5})}starfield(){var s;this.particle.destroy(),null==(s=this.ambient)||s.setLight(.4,.7),this.sky.sky.material.uniforms.sunPosition.value=new t(0,0,0),this.setParticleMode(this.particle,"starfield",{positionBase:new t(-400,200,-700),positionSpread:new t(3e3,400,0),sizeBase:20,particlesPerSecond:1e3,particleDeathAge:3})}fireflies(){var s;this.particle.destroy(),null==(s=this.ambient)||s.setLight(.4,.7),this.sky.sky.material.uniforms.sunPosition.value=new t(0,0,0),this.setParticleMode(this.particle,"fireflies",{positionBase:new t(0,100,-50),positionSpread:new t(300,-200,0),sizeBase:20,particlesPerSecond:10,particleDeathAge:3,particleTexture:this.souce.loadTexture({path:"/docs/public/lizi/spark.png"})})}candle(){this.setLight(),this.setSky(),this.particle.destroy(),this.setParticleMode(this.particle,"candle",{positionBase:new t(0,10,-50),positionRadius:1,velocityBase:new t(0,20,0),velocitySpread:new t(12,40,12),sizeTween:this.getParticleTween([10,10.3,10.2],[14,10,8]),particleDeathAge:4})}clouds(){this.setLight(),this.sky.sky.material.uniforms.sunPosition.value=new t(-100,20,-100),this.particle.destroy(),this.setParticleMode(this.particle,"clouds",{positionBase:new t(-320,40,-300),positionSpread:new t(50,10,100),velocityBase:new t(1,0,0),velocitySpread:new t(10,0,0),sizeBase:30,sizeSpread:10,particlesPerSecond:100,particleDeathAge:10,colorBase:new t(1,1,1)})}firework(){var s;this.particle.destroy(),null==(s=this.ambient)||s.setLight(.4,.7),this.sky.sky.material.uniforms.sunPosition.value=new t(0,0,0),this.setParticleMode(this.particle,"firework",{positionBase:new t(-100,150,-300),positionRadius:15,particlesPerSecond:3e3,particleDeathAge:4})}smoke(){this.setLight(),this.setSky(),this.particle.destroy(),this.setParticleMode(this.particle,"smoke",{positionBase:new t(0,10,-50),positionRadius:1,velocityBase:new t(0,20,0),velocitySpread:new t(12,40,12),sizeTween:this.getParticleTween([10,10.3,10.2],[14,10,8]),particleDeathAge:4})}}a("data-v-f7c29482");const S={class:"wrap"},P={class:"loading"},T=w('<div class="loading-text" data-v-f7c29482><span class="loading-text-words" data-v-f7c29482>L</span><span class="loading-text-words" data-v-f7c29482>O</span><span class="loading-text-words" data-v-f7c29482>A</span><span class="loading-text-words" data-v-f7c29482>D</span><span class="loading-text-words" data-v-f7c29482>I</span><span class="loading-text-words" data-v-f7c29482>N</span><span class="loading-text-words" data-v-f7c29482>G</span></div>',1),B={class:"loding-percent"},E={class:"container"},V={class:"container-text"},A={class:"tips"},z=w('<div class="loading-text" data-v-f7c29482><span class="loading-text-words" data-v-f7c29482>请</span><span class="loading-text-words" data-v-f7c29482>点</span><span class="loading-text-words" data-v-f7c29482>击</span><span class="loading-text-words" data-v-f7c29482>下</span><span class="loading-text-words" data-v-f7c29482>方</span><span class="loading-text-words" data-v-f7c29482>按</span><span class="loading-text-words" data-v-f7c29482>钮</span></div>',1),R=u("span",null,"雪花❄️",-1),_=u("span",null,"雨水🌧️",-1),C=u("span",null,"烟雾🌫️",-1),D=u("span",null,"星星🌟",-1),L=u("span",null,"火焰🔥",-1),I=u("span",null,"烟花🎆",-1),M=u("span",null,"云☁️",-1),H=u("span",null,"萤火虫🐛",-1);n();var j=e({props:{sceneId:{type:String,default:"0"},visible:{type:Boolean,default:!1}},setup(t){const s=t,a=i();let n,e=i(!1),w=i(!0),m=i(!1),b=i(""),j=i("0");l((()=>{N()})),o((()=>{n&&n.destroy(),v.off("scene")})),v.on("scene",(t=>{({loading:()=>{j.value=t.progressNum,w.value=t.value},transition:()=>{m.value=t.value}})[t.type]()})),p((()=>j),(t=>{v.emit("progressNum",g(t)),parseInt(g(t))>=100&&setTimeout((()=>{w.value=!1,m.value=!0,setTimeout((()=>{m.value=!1}),1500)}),1e3)}),{deep:!0}),p((()=>s.sceneId),(()=>{}),{deep:!0,immediate:!0});const N=()=>{const t=a.value;n=new x({el:t,tween:c,path:"../public/scene/"}),Q("1")},q=()=>{n.snow()},F=()=>{n.rain()},O=()=>{n.starfield()},W=()=>{n.fireflies()},G=()=>{n.candle()},U=()=>{n.clouds()},J=()=>{n.firework()},K=()=>{n.smoke()},Q=t=>{switch(t){case"1":n.setScene(2,(()=>{n.init()})),b.value="粒子系统",n.flyTo({position:[-20,50,40],controls:[-20,50,0],duration:2e3})}};return(t,s)=>(d(),r("div",null,[u("div",S,[k("    loding"),h(u("div",P,[T,u("div",B,f(parseInt(g(j)))+"%",1)],512),[[y,g(w)]]),k("转场动画"),h(u("div",E,[u("span",V,f(g(b)),1)],512),[[y,g(m)]]),u("div",{ref:a,id:"map",class:"map"},null,512),h(u("div",A,[z],512),[[y,g(e)]])]),u("div",{class:"btn"},[u("button",{class:"custom-btn btn-3",onClick:q},[R]),u("button",{class:"custom-btn btn-6",onClick:F},[_]),u("button",{class:"custom-btn btn-16",onClick:K},[C]),u("button",{class:"custom-btn btn-8",onClick:O},[D])]),u("div",{class:"btn"},[u("button",{class:"custom-btn btn-3",onClick:G},[L]),u("button",{class:"custom-btn btn-6",onClick:J},[I]),u("button",{class:"custom-btn btn-16",onClick:U},[M]),u("button",{class:"custom-btn btn-8",onClick:W},[H])])]))}});j.__scopeId="data-v-f7c29482";const N=u("h1",{id:"粒子系统"},[u("a",{class:"header-anchor",href:"#粒子系统","aria-hidden":"true"},"#"),m(" 粒子系统")],-1),q=w('',6),F='{"title":"粒子系统","description":"","frontmatter":{},"headers":[{"level":2,"title":"使用","slug":"使用"},{"level":2,"title":"API","slug":"api"}],"relativePath":"Particle/index.md","lastUpdated":1678970318518}',O={};const W=Object.assign(O,{setup:function(t){return(t,s)=>(d(),r("div",null,[N,u(j),q]))}});export default W;export{F as __pageData};
