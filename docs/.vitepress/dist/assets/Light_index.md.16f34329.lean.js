import{V as t,p as n,b as s,d as a,r as e,e as p,f as i,w as o,g as c,o as l,c as u,j as r,h as d,i as h,v as k,u as g,t as b,a as m,k as f}from"./app.fee60d13.js";import{V as y,b as x}from"./index.207465f4.js";class L extends y{constructor(t){super(t),this.initModel()}init(){var t;this.initSky(),this.initSource(),this.model.playAllClipes(this.sceneidx),this.sky.initShaderSky({scale:1e4,turbidity:2,rayleigh:4,postion:[15,.5,-20]}),null==(t=this.ambient)||t.setLight(.5,.7)}clearLight(){var t;null==(t=this.ambient)||t.setLight(1,.7),this.hemisphereLight&&this.hemisphereLight.destory(),this.directional&&this.directional.destory(),this.pointGroup[this.pointIndex]&&this.pointGroup[this.pointIndex].destory(),this.spotLight&&this.spotLight.destory(),this.rectAreaLight&&this.rectAreaLight.destory(),console.log(this.scene)}setLight(){var t;this.clearLight(),null==(t=this.ambient)||t.setLight(1.5,1)}setSkyLight(){this.clearLight(),this.initSkyLight("#66dd7a","#66dd7a",2),this.hemisphereLight.light.position.set(0,180,0),this.hemisphereLight.initHelper(30)}setDirectional(){this.clearLight(),this.initDirectional("#db5847",2),this.directional.light.position.set(50,100,-50),this.directional.initHelper(40),this.directional.light.shadow.mapSize.x=8192,this.directional.light.shadow.mapSize.y=8192}setPoint(){this.clearLight(),this.pointIndex=this.initPointLight("#db5847",3,0),this.pointGroup[this.pointIndex].light.position.set(200,200,-200),this.pointGroup[this.pointIndex].initHelper(40),this.pointGroup[this.pointIndex].light.castShadow=!0}setSpot(){this.clearLight(),this.initSpotLight("#db5847",5,600,new t(0,0,0)),this.spotLight.light.position.set(0,300,0),this.spotLight.light.angle=.8,this.spotLight.initHelper(30)}setRect(){this.clearLight(),this.initRectArea("#fff",100,100,30),this.rectAreaLight.light.position.set(100,100,100),this.rectAreaLight.light.lookAt(0,0,0),this.rectAreaLight.initHelper(30)}setRectBox(){this.clearLight(),this.initRectAreaBox("#fff",140,5,[10,0,50]),this.rectAreaLight.initBoxHelper(30)}setRectBoxNoHelper(){this.clearLight(),this.initRectAreaBox("#66dd7a",150,5,[10,0,50])}}n("data-v-e38e75f6");const v={class:"wrap"},w={class:"loading"},A=m('<div class="loading-text" data-v-e38e75f6><span class="loading-text-words" data-v-e38e75f6>L</span><span class="loading-text-words" data-v-e38e75f6>O</span><span class="loading-text-words" data-v-e38e75f6>A</span><span class="loading-text-words" data-v-e38e75f6>D</span><span class="loading-text-words" data-v-e38e75f6>I</span><span class="loading-text-words" data-v-e38e75f6>N</span><span class="loading-text-words" data-v-e38e75f6>G</span></div>',1),S={class:"loding-percent"},I={class:"container"},q={class:"container-text"},R=r("span",null,"场景光",-1),_=r("span",null,"半球光",-1),C=r("span",null,"平行光",-1),V=r("span",null,"点光源",-1),B=r("span",null,"聚光灯",-1),H=r("span",null,"区域光",-1),P=r("span",null,"光盒",-1),G=r("span",null,"无辅助光盒",-1);s();var T=a({props:{sceneId:{type:String,default:"0"},visible:{type:Boolean,default:!1}},setup(t){const n=t,s=e();let a,m=e(!0),f=e(!1),y=e(""),T=e("0");p((()=>{D()})),i((()=>{a&&a.destroy(),x.off("scene")})),x.on("scene",(t=>{({loading:()=>{T.value=t.progressNum,m.value=t.value},transition:()=>{f.value=t.value}})[t.type]()})),o((()=>T),(t=>{x.emit("progressNum",g(t)),parseInt(g(t))>=100&&setTimeout((()=>{m.value=!1,f.value=!0,setTimeout((()=>{f.value=!1}),1500)}),1e3)}),{deep:!0}),o((()=>n.sceneId),(()=>{}),{deep:!0,immediate:!0});const D=()=>{const t=s.value;a=new L({el:t,tween:c,path:"../public/scene/"}),J(5)},N=()=>{a.setLight()},j=()=>{a.setSkyLight()},z=()=>{a.setDirectional()},O=()=>{a.setPoint()},E=()=>{a.setSpot()},M=()=>{a.setRect()},U=()=>{a.setRectBox()},F=()=>{a.setRectBoxNoHelper()},J=t=>{switch(t){case 5:a.setScene(5,(()=>{a.init()})),y.value="灯光",a.flyTo({position:[36.6,80.6,328.1],controls:[0,0,0],duration:2e3})}};return(t,n)=>(l(),u("div",null,[r("div",v,[d("    loding"),h(r("div",w,[A,r("div",S,b(parseInt(g(T)))+"%",1)],512),[[k,g(m)]]),d("转场动画"),h(r("div",I,[r("span",q,b(g(y)),1)],512),[[k,g(f)]]),r("div",{ref:s,id:"map",class:"map"},null,512)]),r("div",{class:"btn"},[r("button",{class:"custom-btn btn-3",onClick:N},[R]),r("button",{class:"custom-btn btn-6",onClick:j},[_]),r("button",{class:"custom-btn btn-16",onClick:z},[C]),r("button",{class:"custom-btn btn-8",onClick:O},[V])]),r("div",{class:"btn"},[r("button",{class:"custom-btn btn-3",onClick:E},[B]),r("button",{class:"custom-btn btn-6",onClick:M},[H]),r("button",{class:"custom-btn btn-16",onClick:U},[P]),r("button",{class:"custom-btn btn-8",onClick:F},[G])])]))}});T.__scopeId="data-v-e38e75f6";const D=r("h1",{id:"灯光类"},[r("a",{class:"header-anchor",href:"#灯光类","aria-hidden":"true"},"#"),f(" 灯光类")],-1),N=m('',5),j='{"title":"灯光类","description":"","frontmatter":{},"headers":[{"level":2,"title":"使用","slug":"使用"},{"level":2,"title":"API","slug":"api"}],"relativePath":"Light/index.md","lastUpdated":1679141062942}',z={};const O=Object.assign(z,{setup:function(t){return(t,n)=>(l(),u("div",null,[D,r(T),N]))}});export default O;export{j as __pageData};
