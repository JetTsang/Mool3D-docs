import{V as t,aj as a,p as s,a as n,d as e,r as o,b as p,e as r,w as i,f as l,o as c,c as u,h as d,i as k,v as h,u as g,g as b,t as m,j as x,k as w}from"./app.ceccd6b0.js";import{V as v,b as y}from"./index.e1633dd4.js";class f extends v{constructor(t){super(t),this.init()}init(){this.initSource(),this.initSky(),this.setLight(),this.sky.initShaderSky({scale:1e3,turbidity:1,rayleigh:10,postion:[15,2,-20]}),this.initEnvironment({path:"exr.exr",type:"exr"}),this.initWater({textureWidth:200,textureHeight:200,radius:400,waterPosition:new t(0,0,0),texture:this.souce.loadTexture({path:"/docs/public/images/waternormals.jpg",onLoad:function(t){t.wrapS=t.wrapT=a}}),sunPosition:new t(0,5,0),sunColor:"#e19d6a",waterColor:"#e19d6a",distortionScale:.7,time:.01,scene:this.scene}),this.flyTo({position:[0,0,6],controls:[0,2,0],duration:2e3})}setLight(){var t;null==(t=this.ambient)||t.setLight(.7,1)}}s("data-v-6096a62d");const T={class:"wrap"},_={class:"loading"},S=x('<div class="loading-text" data-v-6096a62d><span class="loading-text-words" data-v-6096a62d>L</span><span class="loading-text-words" data-v-6096a62d>O</span><span class="loading-text-words" data-v-6096a62d>A</span><span class="loading-text-words" data-v-6096a62d>D</span><span class="loading-text-words" data-v-6096a62d>I</span><span class="loading-text-words" data-v-6096a62d>N</span><span class="loading-text-words" data-v-6096a62d>G</span></div>',1),P={class:"loding-percent"},I={class:"container"},V={class:"container-text"};n();var W=e({props:{sceneId:{type:String,default:"0"},visible:{type:Boolean,default:!1}},setup(t){const a=t,s=o();let n,e=o(!0),x=o(!1),w=o(""),v=o("0");p((()=>{W()})),r((()=>{n&&n.destroy(),y.off("scene")})),y.on("scene",(t=>{({loading:()=>{v.value=t.progressNum,e.value=t.value},transition:()=>{x.value=t.value}})[t.type]()})),i((()=>v),(t=>{y.emit("progressNum",g(t)),parseInt(g(t))>=100&&setTimeout((()=>{e.value=!1,x.value=!0,setTimeout((()=>{x.value=!1,n.initWater()}),1500)}),1e3)}),{deep:!0}),i((()=>a.sceneId),(()=>{}),{deep:!0,immediate:!0});const W=()=>{const t=s.value;n=new f({el:t,tween:l,path:"../public/scene/"})};return(t,a)=>(c(),u("div",T,[d("    loding"),k(b("div",_,[S,b("div",P,m(parseInt(g(v)))+"%",1)],512),[[h,g(e)]]),d("转场动画"),k(b("div",I,[b("span",V,m(g(w)),1)],512),[[h,g(x)]]),b("div",{ref:s,id:"map",class:"map"},null,512)]))}});W.__scopeId="data-v-6096a62d";const j=b("h1",{id:"water-类"},[b("a",{class:"header-anchor",href:"#water-类","aria-hidden":"true"},"#"),w(" water 类")],-1),C=x('<h2 id="使用"><a class="header-anchor" href="#使用" aria-hidden="true">#</a> 使用</h2><div class="language-js"><pre><code><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">initWater</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n  textureWidth<span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span>\n  textureHeight<span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span>\n  radius<span class="token operator">:</span> <span class="token number">400</span><span class="token punctuation">,</span>\n  waterPosition<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Vector3</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n  texture<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>souce<span class="token punctuation">.</span><span class="token function">loadTexture</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n    path<span class="token operator">:</span> <span class="token string">&quot;/docs/public/images/waternormals.jpg&quot;</span><span class="token punctuation">,</span>\n    <span class="token function-variable function">onLoad</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">texture</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      texture<span class="token punctuation">.</span>wrapS <span class="token operator">=</span> texture<span class="token punctuation">.</span>wrapT <span class="token operator">=</span> RepeatWrapping<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n  sunPosition<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Vector3</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n  sunColor<span class="token operator">:</span> <span class="token string">&quot;#e19d6a&quot;</span><span class="token punctuation">,</span>\n  waterColor<span class="token operator">:</span> <span class="token string">&quot;#e19d6a&quot;</span><span class="token punctuation">,</span>\n  distortionScale<span class="token operator">:</span> <span class="token number">0.7</span><span class="token punctuation">,</span>\n  time<span class="token operator">:</span> <span class="token number">1</span> <span class="token operator">/</span> <span class="token number">100</span><span class="token punctuation">,</span>\n  scene<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>scene<span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre></div><h2 id="api"><a class="header-anchor" href="#api" aria-hidden="true">#</a> API</h2><table><thead><tr><th>Viewer</th><th style="text-align:left;"></th><th></th></tr></thead><tbody><tr><td>属性</td><td style="text-align:left;">描述</td><td></td></tr><tr><td>water</td><td style="text-align:left;">构造器对象（Viewer 中通过 this.water 访问）</td><td></td></tr><tr><td>方法</td><td style="text-align:left;">参数</td><td>描述</td></tr><tr><td>initWater</td><td style="text-align:left;">{<br>radius:半径(number),<br>textureWidth:贴图宽度(number),<br>textureHeight:贴图高度(number),<br>sunPosition:阳光位置(Vector3),<br>sunColor:阳光颜色(string),<br>waterColor:水的颜色(string),<br>waterPosition:水的位置(Vector3),<br>distortionScale:倒影形变程度(number),<br>time:水的运动速度(number),<br>texture:水的贴图(TextureLoader)<br>}</td><td>初始化方法</td></tr></tbody></table><table><thead><tr><th>实例下</th><th style="text-align:left;"></th></tr></thead><tbody><tr><td>属性</td><td style="text-align:left;">描述</td></tr><tr><td>water</td><td style="text-align:left;">访问水实例，可修改水的着色器参数</td></tr><tr><td>time</td><td style="text-align:left;">修改水运动速度</td></tr><tr><td>方法</td><td style="text-align:left;">描述</td></tr><tr><td>init</td><td style="text-align:left;">初始化</td></tr><tr><td>destory</td><td style="text-align:left;">销毁</td></tr></tbody></table>',5),L='{"title":"water 类","description":"","frontmatter":{},"headers":[{"level":2,"title":"使用","slug":"使用"},{"level":2,"title":"API","slug":"api"}],"relativePath":"Water/index.md","lastUpdated":1679115737994}',q={};const A=Object.assign(q,{setup:function(t){return(t,a)=>(c(),u("div",null,[j,b(W),C]))}});export default A;export{L as __pageData};
