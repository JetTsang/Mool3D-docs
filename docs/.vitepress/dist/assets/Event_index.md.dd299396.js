import{S as a,p as t,a as s,d as n,r as e,b as l,e as p,w as d,f as o,o as i,c,g as r,h as u,i as v,v as h,u as g,t as k,j as y,k as x}from"./app.ceccd6b0.js";import{V as m,C as f,b as w}from"./index.e1633dd4.js";class b extends m{constructor(a){super(a),this.initModel()}init(){this.initEnvironment({path:"exr.exr",type:"exr"}),this.setShader(),this.initSky(),this.sky.initShaderSky({scale:100,turbidity:2,rayleigh:4,postion:[15,2,-20]})}setEvent(t){this.initEvent(["mousemove"]),this.event.typesFn={mousemove:[s=>{const n=new a(f);s.list[0].object.material=n,t(s.list[0].point)}]}}setShader(){var a;null==(a=this.animate)||a.animateFuntion.push((a=>{f.uniforms.iTime.value+=a/1.5}))}}t("data-v-2ca3a59a");const T={class:"wrap"},E={class:"loading"},_=y('<div class="loading-text" data-v-2ca3a59a><span class="loading-text-words" data-v-2ca3a59a>L</span><span class="loading-text-words" data-v-2ca3a59a>O</span><span class="loading-text-words" data-v-2ca3a59a>A</span><span class="loading-text-words" data-v-2ca3a59a>D</span><span class="loading-text-words" data-v-2ca3a59a>I</span><span class="loading-text-words" data-v-2ca3a59a>N</span><span class="loading-text-words" data-v-2ca3a59a>G</span></div>',1),S={class:"loding-percent"},I={class:"container"},A={class:"container-text"},j={class:"tips"},N=y('<div class="loading-text" data-v-2ca3a59a><span class="loading-text-words" data-v-2ca3a59a>请</span><span class="loading-text-words" data-v-2ca3a59a>点</span><span class="loading-text-words" data-v-2ca3a59a>击</span><span class="loading-text-words" data-v-2ca3a59a>下</span><span class="loading-text-words" data-v-2ca3a59a>方</span><span class="loading-text-words" data-v-2ca3a59a>按</span><span class="loading-text-words" data-v-2ca3a59a>钮</span></div>',1),P={class:"btn"},V={class:"custom-btn btn-12"},F=r("span",null,"鼠标划过模型位置拾取!",-1);s();var C=n({props:{sceneId:{type:String,default:"0"},visible:{type:Boolean,default:!1}},setup(a){const t=a,s=e();let n,y=e(!1),x=e(),m=e(!0),f=e(!1),C=e(""),O=e("0");l((()=>{q()})),p((()=>{n&&n.destroy(),w.off("scene")})),w.on("scene",(a=>{({loading:()=>{O.value=a.progressNum,m.value=a.value},transition:()=>{f.value=a.value}})[a.type]()})),d((()=>O),(a=>{w.emit("progressNum",g(a)),parseInt(g(a))>=100&&setTimeout((()=>{m.value=!1,f.value=!0,setTimeout((()=>{f.value=!1}),1500)}),1e3)}),{deep:!0}),d((()=>t.sceneId),(()=>{}),{deep:!0,immediate:!0});const q=()=>{const a=s.value;n=new b({el:a,tween:o,path:"../public/scene/"}),z("1")},z=a=>{switch(a){case"1":n.setScene(6,(()=>{n.init(),n.setEvent((a=>{x.value=JSON.stringify({x:a.x,y:a.y,z:a.z})}))})),C.value="场景",n.flyTo({position:[0,0,6],controls:[0,2,0],duration:2e3})}};return(a,t)=>(i(),c("div",null,[r("div",T,[u("    loding"),v(r("div",E,[_,r("div",S,k(parseInt(g(O)))+"%",1)],512),[[h,g(m)]]),u("转场动画"),v(r("div",I,[r("span",A,k(g(C)),1)],512),[[h,g(f)]]),r("div",{ref:s,id:"map",class:"map"},null,512),v(r("div",j,[N],512),[[h,g(y)]])]),r("div",P,[r("button",V,[F,r("span",null,k(g(x)),1)])])]))}});C.__scopeId="data-v-2ca3a59a";const O=r("h1",{id:"模型类"},[r("a",{class:"header-anchor",href:"#模型类","aria-hidden":"true"},"#"),x(" 模型类")],-1),q=y('<h2 id="使用"><a class="header-anchor" href="#使用" aria-hidden="true">#</a> 使用</h2><div class="language-js"><pre><code>el<span class="token operator">:</span>dom元素\ntween<span class="token operator">:</span>过渡库\npath<span class="token operator">:</span>加载路径\nsceneA <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Index</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n  el<span class="token operator">:</span> el <span class="token keyword">as</span> HTMLElement<span class="token punctuation">,</span>\n  tween<span class="token operator">:</span> <span class="token constant">TWEEN</span><span class="token punctuation">,</span>\n  path<span class="token operator">:</span> <span class="token string">&quot;../public/scene/&quot;</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\ntype EventTypes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;click&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;dblclick&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;mousemove&#39;</span><span class="token punctuation">]</span>\nsceneA<span class="token punctuation">.</span><span class="token function">initEvent</span><span class="token punctuation">(</span>types<span class="token operator">:</span> EventTypes<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>\n</code></pre></div><h2 id="api"><a class="header-anchor" href="#api" aria-hidden="true">#</a> API</h2><table><thead><tr><th>Viewer</th><th style="text-align:left;">描述</th><th>参数</th></tr></thead><tbody><tr><td>属性</td><td style="text-align:left;"></td><td></td></tr><tr><td>event</td><td style="text-align:left;">模型类(在 Viewer 通过 this.event 访问)</td><td></td></tr><tr><td>方法</td><td style="text-align:left;"></td><td></td></tr><tr><td>initEvent</td><td style="text-align:left;">事件注册</td><td>types: EventTypes[]</td></tr></tbody></table><table><thead><tr><th>实例下</th><th style="text-align:left;">描述</th><th></th></tr></thead><tbody><tr><td>属性</td><td style="text-align:left;"></td><td>类型</td></tr><tr><td>types</td><td style="text-align:left;">事件类型</td><td>EventTypes[]</td></tr><tr><td>typesFn</td><td style="text-align:left;">各类事件函数解藕</td><td>{[P in EventTypes]?: Fn[]; }</td></tr><tr><td>方法</td><td style="text-align:left;"></td><td>参数</td></tr><tr><td>init</td><td style="text-align:left;">初始化方法</td><td></td></tr></tbody></table>',5),z='{"title":"模型类","description":"","frontmatter":{},"headers":[{"level":2,"title":"使用","slug":"使用"},{"level":2,"title":"API","slug":"api"}],"relativePath":"Event/index.md","lastUpdated":1678275717614}',D={};const L=Object.assign(D,{setup:function(a){return(a,t)=>(i(),c("div",null,[O,r(C),q]))}});export default L;export{z as __pageData};
